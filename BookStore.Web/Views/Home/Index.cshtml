@model HomeViewModel
@{
    ViewData["Title"] = "Book Generator";
}

<div class="row">
    <div class="col-12">
        <div class="table-responsive">
            <table class="table table-hover" id="booksTable">
                <thead class="table-light sticky-top">
                    <tr>
                        <th style="width: 5%">#</th>
                        <th style="width: 15%">ISBN</th>
                        <th style="width: 30%">Title</th>
                        <th style="width: 25%">Author(s)</th>
                        <th style="width: 25%">Publisher</th>
                    </tr>
                </thead>
                <tbody id="booksTableBody">
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="row" id="loadingIndicator" style="display: none;">
    <div class="col-12 text-center py-4">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div class="mt-2">Loading more books...</div>
    </div>
</div>

<div id="scrollTrigger" style="height: 1px;"></div>

<script type="text/javascript">
    window.appConfig = {
        regions: @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Regions.Select(r => new { Code = r.Code, DisplayName = r.DisplayName }))),
        defaultRegion: '@Model.SelectedRegion.Code',
        defaultSeed: @Model.UserSeed,
        defaultLikes: @Model.AverageLikes.ToString(System.Globalization.CultureInfo.InvariantCulture),
        defaultReviews: @Model.AverageReviews.ToString(System.Globalization.CultureInfo.InvariantCulture)
    };
</script>

@section Scripts {
    <script type="module" src="~/js/book.js" asp-append-version="true"></script>
    <script type="module" src="~/js/api.js" asp-append-version="true"></script>
    <script type="module" src="~/js/app.js" asp-append-version="true"></script>
}